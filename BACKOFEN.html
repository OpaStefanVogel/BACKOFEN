<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>BACKOFEN</title>
  </head>

<style>
button {font-size:100%; border-radius:20px}
  </style>

<body style='font-size:300%' onclick='log_id.innerHTML=event.target.getAttribute("id")'>
<script>
window.onerror=function(message, file, line, col, error) {alert('window.onerror:\nmessage '+message+'\nfile: '+file+'\nline: '+line+'\ncol: '+col+'\nerror: '+error+'\n\n')};
window.addEventListener('error',function(arg) {alert('window.addEventListener:\nERROR ERROR ERROR\n message '+arg.error.message+' '+arg.error.name+' '+arg.error['name'])});
  </script>

<script>
////Websocket:
var websocket;
function websocket_verbinden() {
  websocket = new WebSocket(websocket_Adresse.value,"fiktiv");
  websocket.onerror=function(event) {
    };
  websocket.onmessage = function(event) {
    var w=event.data;
    //alert(w);
    Antwort_auswerten(w);
    };
  websocket.onopen = function() {
    //websocket.send('Aktualisieren');
    //restart_GAP();
    //alert("open");
    }; 
  websocket.onclose = function() {
    //alert(77);
    websocket.send("close");
    };
  }

function wsend(text) {
  //alert(text);
  document.getElementById("Antwort").firstChild.nodeValue=text;
  websocket.send(text);
  }

function websocket_verbunden() {
  if (websocket!=0) {
    document.getElementById("Websocket_Status").firstChild.nodeValue=(["CONNECTING", "OPEN", "CLOSING", "CLOSED"])[websocket.readyState];
    }
  }

setTimeout(websocket_verbinden,200);
setInterval(websocket_verbunden,1000);
</script>

<div style='display:none'>Websocket <input id='websocket_Adresse' size='30' value="ws://192.168.1.153:1880/ws/backofen"/> <a href="http://www.w3.org/TR/2012/CR-websockets-20120920/#the-websocket-interface" id="Websocket_Status">CLOSED</a>.</div>

Brötchen <button id='Lenken_linksrum' onclick='websocket.send("Brötchen")'>starten</button>

<div id='log_id' style='display:flex; display:none; overflow:auto; font-family:monospace; white-space:pre; color:blue'> </div>
</body></html>
